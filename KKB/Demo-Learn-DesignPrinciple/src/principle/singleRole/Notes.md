# SRP 单一职责原则
Single responsibility principle

## 单一职责原则的定义

单一职责原则（Single Responsibility Principle，SRP）又称单一功能原则，
由罗伯特·C.马丁（Robert C.Martin）于《敏捷软件开发：原则、模式和实践》一书中提出

这里的职责是指类变化的原因，
单一职责原则规定一个类应该有且仅有一个引起它变化的原因，否则类应该被拆分
（There should never be more than onereason for a class to change）。

## 具体举例说明

### 一个例子

我们新职课的老师对学生有很多的工作要做：例如了解个人信息、每天的学习情况、记录考勤；回答学生问题，帮助解决bug,重难点串讲；行业经验分享等。

如果将这些工作交给一位老师负责显然不合理，正确的做法是现在我们新职课的模式：班主任负责日常工作，技术辅导老师负责技术辅导；企业师傅负责行业经验分享等。

但同时单一职责原则也是一个备受争议的原则
为什么会备受争议呢？主要就是对职责如何定义：
什么是类的职责，以及怎么划分类的职责。

---

### **如果一个对象承担了太多的职责，至少存在以下两个缺点：**

- 一个职责的变化可能会削弱或者抑制这个类实现其他职责的能力；
- 当客户端需要该对象的某一个职责时，不得不将其他不需要的职责全都包含进来，
  从而造成冗余代码或代码的浪费。

---

### 另一个例子

```java
public interface IPhone{
	//拨通电话
	public void dial(String phoneNumber);
	//通话
	public void chat(Object o);
	//通话完毕，挂断电话
	public void hangup();
}
```

以上的接口从业务的角度分析，你可以说他只负责了“一件事”：打电话

但其实从另一个角度出发，其实该接口定义了两个方面的内容

1. 协议管理   -dial()  -hangup()
2. 数据传输   -chat()

那么进一步分析：
协议的改变可能引起接口或者实现类的变化；
同样数据传送的变化也可能会引起接口或实现类的变化。
两个原因都能引起变化，而两个职责直接是互不影响的，所以可以考虑拆分为两个接口。

```java
public interface IPhone{

}

public interface IConnectionManager extends IPhone{
	//拨通电话
	public void dial(String phoneNumber);
	//通话完毕，挂断电话
	public void hangup();
}

public interface IDataTransfer extends IPhone{
	//通话
	public void chat(IConnectionManager con);
}
```

## 单一职责原则的优点

单一职责原则的核心就是控制类的粒度大小、将对象解耦、提高其内聚性。如果遵循单一职责原则将有以下优点。

- 降低类的复杂度。一个类只负责一项职责，其逻辑肯定要比负责多项职责简单得多。
- 提高类的可读性。复杂性降低，自然其可读性会提高。
- 提高系统的可维护性。可读性提高，那自然更容易维护了。
- 变更引起的风险降低。变更是必然的，
  如果单一职责原则遵守得好，当修改一个功能时，可以显著降低对其他功能的影响。

单一职责原则是最简单但又最难运用的原则，需要设计人员发现类的不同职责并将其分离，再封装到不同的类或模块中。而发现类的多重职责需要设计人员具有较强的分析设计能力和相关重构经验。

**PS：单一职责同样也适用于方法。一个方法应该尽可能做好一件事情。如果一个方法处理的事情太多，其颗粒度会变得很粗，不利于重用。**

但是原则是死的，具体问题具体分析。有些时候也可以为了效率，牺牲一定的原则性。