<!DOCTYPE html>
<html lang="zh">

<head>
	<meta charset="UTF-8">
	<title>使用百度地图API获取地理位置</title>
</head>

<body>
<p id="position"></p>
<button onclick="getLocation()">点我获取当前坐标</button>
<!--<script src="https://api.map.baidu.com/api?v=2.0&ak=nbayQz8caAKuy60pk9otBOxZecZE8Wc8"></script>-->
<script src="http://api.map.baidu.com/getscript?v=2.0&ak=nbayQz8caAKuy60pk9otBOxZecZE8Wc8"></script>
<script type="text/javascript">
	let position = document.getElementById('position');

	function getLocation() {
		// 创建百度地理位置实例，代替 navigator.geolocation
		let geolocation = new BMap.Geolocation();
		geolocation.getCurrentPosition(function (e) {
			if (this.getStatus() === BMAP_STATUS_SUCCESS) {
				// 百度 geolocation 的经纬度属性不同，此处是 point.lat 而不是 coords.latitude
				let lat = e.point.lat;
				let lng = e.point.lng;
				position.innerHTML = '经度：' + lng + '<br/>纬度：' + lat;
			} else {
				position.innerHTML = 'failed' + this.getStatus();
			}
		});
	}
</script>
</body>

</html>
